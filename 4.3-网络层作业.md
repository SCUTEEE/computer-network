第五章习题

2

虚电路网络需要具备这样的能力，因为路由连接的建立需要数据包从从任意源头到任意目的能力。

3

窗口大小、最大包长、速率

6

B的矢量：(5,0,8,12,16,2)+CB成本 6=(11,6,14,18,12,8)
D的矢量：(5,0,8,12,16,2)+CD成本 3=(19,15,9,3,9,10)
E的矢量：(5,0,8,12,16,2)+CE成本 5=(12,11,8,14,5,9)

故新路由表为 (A:B,B:B,-,C:D,D:E,E:B)，成本为 (11,6,0,3,5,8)


11

逆向路径算法执行了5轮之后才结束。依次广播顺序为 AC,DFIJ,DEGHIJKN,GHKN,LMO。总共21个包 汇集树需要4轮14个包。


12

因为IFG没有在汇集树上，所有不用添加圆圈，只是在F的子节点增加了G，在G的子节点上增加F，当然也不用添加圆圈，因为该路径也没有出现在汇集树上

17

ECN是通过在数据包中打标志位向数据包发送拥塞指示。RED通过随机丢弃数据包向源暗示拥塞。ECN只有在没有缓存时才会丢弃数据包，而RED在缓存耗尽之前就开始随机丢弃数据包

18

48byte*1s/5us= 76.8Mbps

19

S=8/(6-1)=1.6s

23

A-R1 可支持1024bytes，所以不需要分包头部长度900bytes数据+20bytesTCP头+20bytesIP头 = 940个

Total length = 940; ID=x; DF=0; MF=0; Offset = 0;

R1-R2可支持512bytes，需要分包，并且在另一个包头再添加一次IP头

Total length = 500; ID=x; DF=0; MF=1; Offset = 0;
Total length = 460; ID=x; DF=0; MF=0; Offset = 60;

R2-B支持512bytes，需要分包，并且在另一个包头再添加一次IP头

Total length = 500; ID=x; DF=0; MF=1; Offset = 0;
Total length = 460; ID=x; DF=0; MF=0; Offset = 60;

26

B 类地址前两位是 10，所以共有 2^18-262144 个 B 类网络

27

地址为 194.47.21.130

28

掩码有20位，所有网络部分占了地址的20位，剩下12位留给主机，所以主机数量有2^12=4096

30

A需要4000个地址，即 2^12 = 4096，所以需要12个主机地址位，20个网络位，所以A地址为198.16.0.0 - 198.16.15.255 写成198.16.0.0/20 形式 

B需要2000个地址，即 2^11 = 2048，所以需要11个主机地址位，21个网络位，所以B地址为198.16.16.0-198.16.23.255 写成198.16.16.0/21 

C需要4000个地址，即 2^12 = 4096，所以需要12个主机地址位，20个网络位，所以C地址为 198.16.32.0-198.16.47.255，写成198.16.32.0/20 

D需要8000个地址，即 2^13 = 8192，所以需要13个主机地址位，19个网络位，所以D地址为 198.16.64.0-198.16.95.255 写成198.16.64.0/19

31

将三个IP地址写成二进制的形式：

00111001 00000110 1100000 00000000
00111001 00000110 1101000 00000000
00111001 00000110 1110000 00000000
00111001 00000110 1111000 00000000

可以看出，这三个地址前 18 位都是相同的，故可以被聚合到 587.6.192.0/18

32

需要添加一个新的表入口29.18.60.00/22提供给这块新的空闲地址，如果收到的数据包同时满足29.18.0.0/17 和 29.18.60.00/22，则选取最长匹配前缀，即 29.18.60.00/22。所以不必和聚合地址分割成几块，只要添加新的地址块就可以。

33

（a) interface0
（b）interface0
（c）router2
（d）router1
（e）router2

34

NAT安装之后，最主要的是所有数据包从一个路由出，也会从同一个路由返回。如果每个路由都有自己IP地址，并且所有的流量都通过同一个路由，NAT安装之后仍然可以工作，当一个路由器停机时，由另一个路由器提供 NAT 服务。

35

ARP不是向网络层提供服务，它本身是网络层的一部分，并且向传输层提供服务。链路层不会处理IP地址信息

37

最后一段也应该等待其他段的到来，如果其他段没有到来，那么最后一段也会超时丢弃

38

包头出错的后果比数据出错的后果要严重的多，一个出错的地址，可能导致数据包被送到错误的主机上，许多主机并不会验证收到的数据包是不是真正发给他们的。他们假设网络不会送给他们发送到其他主机的数据包。数据不校验是因为其开销太大，而且其他层也有相关的校验，没有必要在网络层上做这件事情

40

16个字节有 2^128 = 3.4*10^38 个地址，如果每秒分配 10^18 个，大概可以持续 10^13 年

41

Protocol 高速目的终端该数据包是发往哪个传输层处理的，路由器不需要知道这个信息，所以不需要存在固定头中。事实上该字段被隐藏了。在拓展头中下一个头字段的功能与protocol功能是一样的。

第五章补充习题：

补1：叙述OSPF 运作过程，以及OSPF 路由器的状态转换过程。



补2：请解释OSPF 运行机制如何保证OSPF 报文的可靠传输？



